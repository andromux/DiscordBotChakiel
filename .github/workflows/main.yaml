name: Build Windows Executable (PyInstaller)

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: üîÑ Checkout code
      uses: actions/checkout@v4


    # --- Instalaci√≥n y Compilaci√≥n con PyInstaller ---
    - name: üì¶ Package Application with PyInstaller for Windows
      uses: JackMcKew/pyinstaller-action-windows@main
      with:
        path: src
        # *** ESTA L√çNEA FUE CORREGIDA: se usa 'args' en lugar de 'pyinstaller_options' ***
        args: --onefile --windowed

    # --- Post-Compilaci√≥n: Cargar el ejecutable como Artifact ---
    - name: üì§ Upload Windows Executable Artifact
      uses: actions/upload-artifact@v4
      with:
        name: Discord-Cleaner-Bot-GUI-Windows-Executable
        path: src/dist/windows/*
        retention-days: 30
